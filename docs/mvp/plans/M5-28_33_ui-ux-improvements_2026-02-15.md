# M5-28〜M5-33 UI/UX改善チケット分割メモ

- 作成日: 2026-02-15
- 対象: テーブル実機確認で出たUI/UX改善要望のチケット化
- 関連: [`進捗管理シート_mvp.md`](../進捗管理シート_mvp.md), [`画面設計書_mvp.md`](../画面設計書_mvp.md), [`要件定義書_mvp.md`](../要件定義書_mvp.md)

---

## M5-28: UIテーマ統一（クラシックカジノ風）

### 目的
ロビー/テーブル/履歴で統一感のある見た目を実現する。

### 背景
現在はテーブル画面側に寄った調整が中心で、画面間のテーマ一貫性が不足している。

### 実装方針
- デザイントークン（配色・角丸・影・タイポグラフィ）を画面横断で定義する。
- テーブル画面のクラシックカジノ風を基準に、ロビー/履歴へ展開する。
- 既存の情報構造は維持し、見た目統一を優先する。

### 完了条件
- [ ] ロビー/テーブル/履歴で同一トークンセットを利用している。
- [ ] 画面間で配色・フォント階層・コンポーネント質感が統一されている。
- [ ] 既存機能の操作導線（遷移・主要ボタン）が退行していない。

---

## M5-29: テーブル画面の情報整理（進行ログ/アクションボタン）

### 目的
進行ログと操作UIの見やすさを改善し、プレイ中の視線移動と操作ミスを減らす。

### 背景
進行ログ（履歴）とアクションボタン配置に改善余地がある。

### 実装方針
- 進行ログの表示量・優先度・配置を再設計する。
- アクションボタンの位置を「現在手番で最短操作できる」配置へ調整する。
- モバイル/デスクトップ双方で、ログと操作UIの干渉を防ぐ。

### 完了条件
- [ ] 進行ログは重要情報が先に読める並び/見せ方になっている。
- [ ] 手番時のアクションボタン到達性が改善されている。
- [ ] ログ表示と操作UIが重なって操作不能になる状態がない。

---

## M5-30: ショーダウン役表示フォーマット拡張（High/Low）

### 目的
ショーダウン結果をゲーム種別に応じて誤読しづらい形式で表示する。

### 背景
役表示は実装済みだが、High/Lowの表示規則をUI上で明文化・統一したい。

### 実装方針
- High Hand（Stud Hi, Stud8）は `H: [役名]` 形式で表示する。
- Low Hand（Razz, Stud8）は `L: [ランク文字列]`、成立しない場合は `L: ローなし` を表示する。
- ランク文字列は成立5枚をハイフン区切り（例: `7-5-4-3-A`）で表示する。
- 役名は以下を使用する:
  - ハイカード
  - ワンペア
  - ツーペア
  - スリーカード
  - ストレート
  - フラッシュ
  - フルハウス
  - フォーカード
  - ストレートフラッシュ

### 完了条件
- [ ] Stud Hi/Stud8/Razz の各ゲーム種で表示形式が仕様どおり。
- [ ] Low未成立時に `L: ローなし` が表示される。
- [ ] SHOW/MUCK制御（M5-27）と矛盾しない。

---

## M5-31: 離席予約チェックボックス追加（次ハンド離席）

### 目的
「今のハンドは続けるが次ハンドは離席したい」操作を明確化する。

### 背景
現状は離席タイミング制御が直感的でなく、次ハンドから離席したい要望に対応しづらい。

### 実装方針
- 各プレイヤーが自席に対して「離席予約」を設定できるUIを追加する。
- ハンド終了時に予約済みプレイヤーを次ハンド開始前に離席状態へ遷移する。
- 離席状態プレイヤーには復帰用の着席ボタンを表示する。

### 完了条件
- [ ] 離席予約ONのプレイヤーは次ハンドから参加しない。
- [ ] 離席後に着席ボタンから次ハンド参加可能状態へ戻せる。
- [ ] 進行中ハンドには影響せず、境界はハンド終了時に固定される。

---

## M5-32: ゲーム開始承認フロー追加（30秒）

### 目的
着席人数が条件を満たした際に即開始せず、参加意思を確認して開始する。

### 背景
2人以上揃った時点で自動開始されると、準備できていないプレイヤーが巻き込まれる。

### 実装方針
- 2人以上揃ったタイミングで着席者全員に開始承認を要求する。
- 承認開始後に新規着席があれば、そのプレイヤーも承認対象へ追加する。
- 最初の承認要求時点から30秒タイマーを開始し、残り時間バーを表示する。
- 30秒時点で承認人数が2人以上なら承認者のみで開始し、非承認者は離席扱いにする。
- 承認人数が1人以下なら、全員を対象に再度30秒の承認フローを開始する。

### 完了条件
- [ ] 30秒承認フローが席状態変化（途中参加）を含めて成立する。
- [ ] タイムアウト時の分岐（2人以上承認/1人以下承認）が仕様どおり。
- [ ] クライアント表示（残り時間・承認状態）とサーバー判定が一致する。

---

## M5-33: 履歴画面の表示整理（ノイズ削減）

### 目的
履歴画面で必要情報に集中できる表示へ整理する。

### 背景
履歴画面の表示項目にノイズがあり、読解コストが高い。

### 実装方針
- `#1` のような連番表示を削除する。
- ANTE表示は省略または簡略表示へ変更する。
- 一覧/詳細ともに「結果把握に必要な情報」を優先したレイアウトに調整する。

### 完了条件
- [ ] 不要な連番表示が除去されている。
- [ ] ANTE表示が簡略化され、主要アクションの可読性が向上している。
- [ ] 履歴API契約との齟齬なく表示できる。

---

## Out of Scope（本メモ作成時点）

- このメモ内での実装着手
- API/WS契約の新規追加（必要な場合は実装時に別途起票）
